{"remainingRequest":"E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\babel-loader\\lib\\index.js!E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Codes\\VSCode\\smart-community-vue\\src\\pages\\Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Codes\\VSCode\\smart-community-vue\\src\\pages\\Role.vue","mtime":1657117836992},{"path":"E:\\Codes\\VSCode\\smart-community-vue\\babel.config.js","mtime":1657117828045},{"path":"E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657117829755},{"path":"E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1657117829056},{"path":"E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657117829755},{"path":"E:\\Codes\\VSCode\\smart-community-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1657117836604}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IHsKLy8gICByb2xlTGlzdCwKLy8gICByb2xlU2F2ZSwKLy8gICByb2xlRGVsZXRlLAovLyAgIHJvbGVQd2QsCi8vICAgUm9sZVJpZ2h0VHJlZSwKLy8gICBSb2xlUmlnaHRTYXZlCi8vIH0gZnJvbSAnLi4vLi4vYXBpL3VzZXJNRycKLy8gaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9QYWdpbmF0aW9uJwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5zaG93OiB0cnVlLAogICAgICAvL3N3aXRjaOW8gOWQrwogICAgICBmc2hvdzogZmFsc2UsCiAgICAgIC8vc3dpdGNo5YWz6ZetCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvL+aYr+aYvuekuuWKoOi9vQogICAgICBlZGl0Rm9ybVZpc2libGU6IGZhbHNlLAogICAgICAvL+aOp+WItue8lui+kemhtemdouaYvuekuuS4jumakOiXjwogICAgICBtZW51QWNjZXNzc2hvdzogZmFsc2UsCiAgICAgIC8v5o6n5Yi25pWw5o2u5p2D6ZmQ5pi+56S65LiO6ZqQ6JePCiAgICAgIHRpdGxlOiAn5re75YqgJywKICAgICAgZWRpdEZvcm06IHsKICAgICAgICByb2xlSWQ6ICcnLAogICAgICAgIHN5c3RlbU5vOiAnJywKICAgICAgICByb2xlTm86ICcnLAogICAgICAgIHJvbGVOYW1lOiAnJywKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2ludG9rZW4nKQogICAgICB9LAogICAgICAvLyBydWxlcyDooajljZXpqozor4EKICAgICAgcnVsZXM6IHsKICAgICAgICBzeXN0ZW1ObzogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeezu+e7n+e8lueggScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICByb2xlTm86IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLku6PnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcm9sZU5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLlkI3np7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZm9ybUlubGluZTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIHZhckxhYmxlOiAnJywKICAgICAgICB2YXJOYW1lOiAnJywKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2ludG9rZW4nKQogICAgICB9LAogICAgICAvLyDliKDpmaQKICAgICAgc2VsZXRlZGF0YTogewogICAgICAgIGlkczogJycsCiAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dpbnRva2VuJykKICAgICAgfSwKICAgICAgdXNlcnBhcm06IFtdLAogICAgICAvL+aQnOe0ouadg+mZkAogICAgICBsaXN0RGF0YTogW10sCiAgICAgIC8v55So5oi35pWw5o2uCiAgICAgIC8vIOaVsOaNruadg+mZkAogICAgICBSb2xlUmlnaHQ6IFtdLAogICAgICBSb2xlUmlnaHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgfSwKICAgICAgLy8g6YCJ5LitCiAgICAgIGNoZWNrbWVudTogW10sCiAgICAgIC8v5Y+C5pWwcm9sZQogICAgICBzYXZlcm9sZUlkOiAnJywKICAgICAgLy8g5YiG6aG15Y+C5pWwCiAgICAgIHBhZ2VwYXJtOiB7CiAgICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHRvdGFsOiAxMAogICAgICB9CiAgICB9OwogIH0sCgogIC8vIOazqOWGjOe7hOS7tgogIGNvbXBvbmVudHM6IHsvLyBQYWdpbmF0aW9uCiAgfSwKCiAgLyoqDQogICAqIOaVsOaNruWPkeeUn+aUueWPmA0KICAgKi8KICB3YXRjaDoge30sCgogIC8qKg0KICAgKiDliJvlu7rlrozmr5UNCiAgICovCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0ZGF0YSh0aGlzLmZvcm1JbmxpbmUpOwogIH0sCgogIC8qKg0KICAgKiDph4zpnaLnmoTmlrnms5Xlj6rmnInooqvosIPnlKjmiY3kvJrmiafooYwNCiAgICovCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W6KeS6Imy5YiX6KGoCiAgICBnZXRkYXRhKHBhcmFtZXRlcikgewogICAgICAvLyDmqKHmi5/mlbDmja4KICAgICAgbGV0IHJlcyA9IHsKICAgICAgICBjb2RlOiAwLAogICAgICAgIG1zZzogbnVsbCwKICAgICAgICBjb3VudDogNiwKICAgICAgICBkYXRhOiBbewogICAgICAgICAgYWRkVXNlcjogJ3Jvb3QnLAogICAgICAgICAgZWRpdFVzZXI6ICdyb290JywKICAgICAgICAgIGFkZFRpbWU6IDE1MTkxODIwMDQwMDAsCiAgICAgICAgICBlZGl0VGltZTogMTUyMDI4ODQyNjAwMCwKICAgICAgICAgIHJvbGVJZDogMSwKICAgICAgICAgIHN5c3RlbU5vOiAncG1kJywKICAgICAgICAgIHJvbGVObzogJ0FkbWluaXN0cmF0b3InLAogICAgICAgICAgcm9sZU5hbWU6ICfotoXnuqfnrqHnkIblkZgnCiAgICAgICAgfSwgewogICAgICAgICAgYWRkVXNlcjogbnVsbCwKICAgICAgICAgIGVkaXRVc2VyOiBudWxsLAogICAgICAgICAgYWRkVGltZTogMTUyMTExMTM3NjAwMCwKICAgICAgICAgIGVkaXRUaW1lOiAxNTIwNjc4MTkxMDAwLAogICAgICAgICAgcm9sZUlkOiAyLAogICAgICAgICAgc3lzdGVtTm86ICdvcmRlcicsCiAgICAgICAgICByb2xlTm86ICdhZG1pbicsCiAgICAgICAgICByb2xlTmFtZTogJ+WFrOWPuOeuoeeQhuWRmCcKICAgICAgICB9LCB7CiAgICAgICAgICBhZGRVc2VyOiBudWxsLAogICAgICAgICAgZWRpdFVzZXI6IG51bGwsCiAgICAgICAgICBhZGRUaW1lOiAxNTIwNjc4MjIxMDAwLAogICAgICAgICAgZWRpdFRpbWU6IDE1MjA2NzgyMjEwMDAsCiAgICAgICAgICByb2xlSWQ6IDk1LAogICAgICAgICAgc3lzdGVtTm86ICdwbScsCiAgICAgICAgICByb2xlTm86ICdjb21tb24nLAogICAgICAgICAgcm9sZU5hbWU6ICfmma7pgJrnlKjmiLcnCiAgICAgICAgfSwgewogICAgICAgICAgYWRkVXNlcjogbnVsbCwKICAgICAgICAgIGVkaXRVc2VyOiBudWxsLAogICAgICAgICAgYWRkVGltZTogMTUyNjM0OTg1MzAwMCwKICAgICAgICAgIGVkaXRUaW1lOiAxNTI2MzQ5ODUzMDAwLAogICAgICAgICAgcm9sZUlkOiA5NiwKICAgICAgICAgIHN5c3RlbU5vOiAnMScsCiAgICAgICAgICByb2xlTm86ICcxJywKICAgICAgICAgIHJvbGVOYW1lOiAnMScKICAgICAgICB9LCB7CiAgICAgICAgICBhZGRVc2VyOiBudWxsLAogICAgICAgICAgZWRpdFVzZXI6IG51bGwsCiAgICAgICAgICBhZGRUaW1lOiAxNTI2MzQ5OTQyMDAwLAogICAgICAgICAgZWRpdFRpbWU6IDE1MjY0Mzc0NDMwMDAsCiAgICAgICAgICByb2xlSWQ6IDk3LAogICAgICAgICAgc3lzdGVtTm86ICcyJywKICAgICAgICAgIHJvbGVObzogJzInLAogICAgICAgICAgcm9sZU5hbWU6ICcyJwogICAgICAgIH0sIHsKICAgICAgICAgIGFkZFVzZXI6IG51bGwsCiAgICAgICAgICBlZGl0VXNlcjogbnVsbCwKICAgICAgICAgIGFkZFRpbWU6IDE1MjY2NTIxNDgwMDAsCiAgICAgICAgICBlZGl0VGltZTogMTUyNjY1MjE0ODAwMCwKICAgICAgICAgIHJvbGVJZDogMTAxLAogICAgICAgICAgc3lzdGVtTm86ICd0ZXN0JywKICAgICAgICAgIHJvbGVObzogJ2RlbW8nLAogICAgICAgICAgcm9sZU5hbWU6ICfmvJTnpLrop5LoibInCiAgICAgICAgfV0KICAgICAgfTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMubGlzdERhdGEgPSByZXMuZGF0YTsgLy8g5YiG6aG16LWL5YC8CgogICAgICB0aGlzLnBhZ2VwYXJtLmN1cnJlbnRQYWdlID0gdGhpcy5mb3JtSW5saW5lLnBhZ2U7CiAgICAgIHRoaXMucGFnZXBhcm0ucGFnZVNpemUgPSB0aGlzLmZvcm1JbmxpbmUubGltaXQ7CiAgICAgIHRoaXMucGFnZXBhcm0udG90YWwgPSByZXMuY291bnQ7IC8vIOaooeaLn+aVsOaNrue7k+adnwoKICAgICAgLyoqKg0KICAgICAgICog6LCD55So5o6l5Y+j77yM5rOo6YeK5LiK6Z2i5qih5ouf5pWw5o2uIOWPlua2iOS4i+mdouazqOmHig0KICAgICAgICovCiAgICAgIC8vIHJvbGVMaXN0KHBhcmFtZXRlcikKICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgLy8gICAgIGlmIChyZXMuc3VjY2VzcyA9PSBmYWxzZSkgewogICAgICAvLyAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgLy8gICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgIC8vICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAvLyAgICAgICB9KQogICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgLy8gICAgICAgdGhpcy5saXN0RGF0YSA9IHJlcy5kYXRhCiAgICAgIC8vICAgICAgIC8vIOWIhumhtei1i+WAvAogICAgICAvLyAgICAgICB0aGlzLnBhZ2VwYXJtLmN1cnJlbnRQYWdlID0gdGhpcy5mb3JtSW5saW5lLnBhZ2UKICAgICAgLy8gICAgICAgdGhpcy5wYWdlcGFybS5wYWdlU2l6ZSA9IHRoaXMuZm9ybUlubGluZS5saW1pdAogICAgICAvLyAgICAgICB0aGlzLnBhZ2VwYXJtLnRvdGFsID0gcmVzLmNvdW50CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goZXJyID0+IHsKICAgICAgLy8gICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bop5LoibLliJfooajlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEnKQogICAgICAvLyAgIH0pCiAgICB9LAoKICAgIC8vIOWIhumhteaPkuS7tuS6i+S7tgogICAgY2FsbEZhdGhlcihwYXJtKSB7CiAgICAgIHRoaXMuZm9ybUlubGluZS5wYWdlID0gcGFybS5jdXJyZW50UGFnZTsKICAgICAgdGhpcy5mb3JtSW5saW5lLmxpbWl0ID0gcGFybS5wYWdlU2l6ZTsKICAgICAgdGhpcy5nZXRkYXRhKHRoaXMuZm9ybUlubGluZSk7CiAgICB9LAoKICAgIC8vIOaQnOe0ouS6i+S7tgogICAgc2VhcmNoKCkgewogICAgICB0aGlzLmdldGRhdGEodGhpcy5mb3JtSW5saW5lKTsKICAgIH0sCgogICAgLy/mmL7npLrnvJbovpHnlYzpnaIKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIChpbmRleCwgcm93KSB7CiAgICAgIHRoaXMuZWRpdEZvcm1WaXNpYmxlID0gdHJ1ZTsKCiAgICAgIGlmIChyb3cgIT0gdW5kZWZpbmVkICYmIHJvdyAhPSAndW5kZWZpbmVkJykgewogICAgICAgIHRoaXMudGl0bGUgPSAn5L+u5pS5JzsKICAgICAgICB0aGlzLmVkaXRGb3JtLnJvbGVJZCA9IHJvdy5yb2xlSWQ7CiAgICAgICAgdGhpcy5lZGl0Rm9ybS5zeXN0ZW1ObyA9IHJvdy5zeXN0ZW1ObzsKICAgICAgICB0aGlzLmVkaXRGb3JtLnJvbGVObyA9IHJvdy5yb2xlTm87CiAgICAgICAgdGhpcy5lZGl0Rm9ybS5yb2xlTmFtZSA9IHJvdy5yb2xlTmFtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRpdGxlID0gJ+a3u+WKoCc7CiAgICAgICAgdGhpcy5lZGl0Rm9ybS5yb2xlSWQgPSAnJzsKICAgICAgICB0aGlzLmVkaXRGb3JtLnN5c3RlbU5vID0gJyc7CiAgICAgICAgdGhpcy5lZGl0Rm9ybS5yb2xlTm8gPSAnJzsKICAgICAgICB0aGlzLmVkaXRGb3JtLnJvbGVOYW1lID0gJyc7CiAgICAgIH0KICAgIH0sCgogICAgLy8g57yW6L6R44CB5aKe5Yqg6aG16Z2i5L+d5a2Y5pa55rOVCiAgICBzdWJtaXRGb3JtKGVkaXREYXRhKSB7CiAgICAgIHRoaXMuJHJlZnNbZWRpdERhdGFdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHJvbGVTYXZlKHRoaXMuZWRpdEZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5lZGl0Rm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICB0aGlzLmdldGRhdGEodGhpcy5mb3JtSW5saW5lKTsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfop5LoibLkv53lrZjmiJDlip/vvIEnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIHRoaXMuZWRpdEZvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfop5LoibLkv53lrZjlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g5Yig6Zmk6KeS6ImyCiAgICBkZWxldGVVc2VyKGluZGV4LCByb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a6KaB5Yig6Zmk5ZCXPycsICfkv6Hmga8nLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICByb2xlRGVsZXRlKHJvdy5yb2xlSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+inkuiJsuW3suWIoOmZpO+8gScKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZ2V0ZGF0YSh0aGlzLmZvcm1JbmxpbmUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6KeS6Imy5Yig6Zmk5aSx6LSl77yM6K+356iN5ZCO5YaN6K+V77yBJyk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDmlbDmja7mnYPpmZAKICAgIG1lbnVBY2Nlc3M6IGZ1bmN0aW9uIChpbmRleCwgcm93KSB7CiAgICAgIHRoaXMubWVudUFjY2Vzc3Nob3cgPSB0cnVlOwogICAgICB0aGlzLnNhdmVyb2xlSWQgPSByb3cucm9sZUlkOwogICAgICBSb2xlUmlnaHRUcmVlKHJvdy5yb2xlSWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+iOt+WPluadg+mZkOaIkOWKnycKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5jaGFuZ2VtZW51KHJlcy5kYXRhLmRhdGEpOwogICAgICAgICAgdGhpcy5Sb2xlUmlnaHQgPSB0aGlzLmNoYW5nZUFycihyZXMuZGF0YS5kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzLmRhdGEubXNnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5p2D6ZmQ5aSx6LSl77yM6K+356iN5ZCO5YaN6K+V77yBJyk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvLyDpgInkuK3oj5zljZUKICAgIGNoYW5nZW1lbnUoYXJyKSB7CiAgICAgIGxldCBjaGFuZ2UgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGFycltpXS5jaGVja2VkKSB7CiAgICAgICAgICBjaGFuZ2UucHVzaChhcnJbaV0uaWQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jaGVja21lbnUgPSBjaGFuZ2U7CiAgICB9LAoKICAgIC8vIHRyZWUg6YCS5b2SCiAgICBjaGFuZ2VBcnIobGlzdCkgewogICAgICB2YXIgdGVtcHRyZWUgPSBbXSwKICAgICAgICAgIHRyZWUgPSBbXSwKICAgICAgICAgIGl0ZW1zID0gW107CgogICAgICBmb3IgKHZhciBpIGluIGxpc3QpIHsKICAgICAgICBpZiAoIXRlbXB0cmVlW2xpc3RbaV0uaWRdKSB7CiAgICAgICAgICB2YXIgdHJvdyA9IHsKICAgICAgICAgICAgaWQ6IGxpc3RbaV0uaWQsCiAgICAgICAgICAgIHBJZDogbGlzdFtpXS5wSWQsCiAgICAgICAgICAgIG5hbWU6IGxpc3RbaV0ubmFtZSwKICAgICAgICAgICAgb3BlbjogbGlzdFtpXS5vcGVuLAogICAgICAgICAgICBjaGVja2VkOiBsaXN0W2ldLmNoZWNrZWQsCiAgICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgICAgfTsKICAgICAgICAgIHRlbXB0cmVlW2xpc3RbaV0uaWRdID0gdHJvdzsKICAgICAgICAgIGl0ZW1zLnB1c2godHJvdyk7CiAgICAgICAgfQoKICAgICAgICBpZiAobGlzdFtpXS51aWQgPiAwKSB7CiAgICAgICAgICB0ZW1wdHJlZVtsaXN0W2ldLmlkXVsnY2hpbGRyZW4nXS5wdXNoKHsKICAgICAgICAgICAgaWQ6IGxpc3RbaV0uaWQsCiAgICAgICAgICAgIHBJZDogbGlzdFtpXS5wSWQsCiAgICAgICAgICAgIG5hbWU6IGxpc3RbaV0ubmFtZSwKICAgICAgICAgICAgb3BlbjogbGlzdFtpXS5vcGVuLAogICAgICAgICAgICBjaGVja2VkOiBsaXN0W2ldLmNoZWNrZWQsCiAgICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciBqIGluIGl0ZW1zKSB7CiAgICAgICAgaWYgKHRlbXB0cmVlW2l0ZW1zW2pdLnBJZF0pIHsKICAgICAgICAgIHRlbXB0cmVlW2l0ZW1zW2pdLnBJZF1bJ2NoaWxkcmVuJ10ucHVzaCh0ZW1wdHJlZVtpdGVtc1tqXS5pZF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0cmVlLnB1c2godGVtcHRyZWVbaXRlbXNbal0uaWRdKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRlbXB0cmVlID0gbnVsbDsKICAgICAgaXRlbXMgPSBudWxsOwogICAgICByZXR1cm4gdHJlZTsKICAgIH0sCgogICAgLy8g6I+c5Y2V5p2D6ZmQLeS/neWtmAogICAgbWVudVBlcm1TYXZlKCkgewogICAgICBsZXQgcGFybSA9IHsKICAgICAgICByb2xlSWQ6IHRoaXMuc2F2ZXJvbGVJZCwKICAgICAgICBtb2R1bGVJZHM6ICcnCiAgICAgIH07CiAgICAgIGxldCBub2RlID0gdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWROb2RlcygpOwogICAgICBsZXQgbW9kdWxlSWRzID0gW107CgogICAgICBpZiAobm9kZS5sZW5ndGggIT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgbW9kdWxlSWRzLnB1c2gobm9kZVtpXS5pZCk7CiAgICAgICAgfQoKICAgICAgICBwYXJtLm1vZHVsZUlkcyA9IEpTT04uc3RyaW5naWZ5KG1vZHVsZUlkcyk7CiAgICAgIH0KCiAgICAgIFJvbGVSaWdodFNhdmUocGFybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+adg+mZkOS/neWtmOaIkOWKnycKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5tZW51QWNjZXNzc2hvdyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5nZXRkYXRhKHRoaXMuZm9ybUlubGluZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmnYPpmZDkv53lrZjlpLHotKXvvIzor7fnqI3lkI7lho3or5XvvIEnKTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOWFs+mXree8lui+keOAgeWinuWKoOW8ueWHuuahhgogICAgY2xvc2VEaWFsb2coZGlhbG9nKSB7CiAgICAgIGlmIChkaWFsb2cgPT0gJ2VkaXQnKSB7CiAgICAgICAgdGhpcy5lZGl0Rm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmIChkaWFsb2cgPT0gJ3Blcm0nKSB7CiAgICAgICAgdGhpcy5tZW51QWNjZXNzc2hvdyA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,WADA;MACA;MACAC,YAFA;MAEA;MACAC,cAHA;MAGA;MACAC,sBAJA;MAIA;MACAC,qBALA;MAKA;MACAC,WANA;MAOAC;QACAC,UADA;QAEAC,YAFA;QAGAC,UAHA;QAIAC,YAJA;QAKAC;MALA,CAPA;MAcA;MACAC;QACAJ,WACA;UAAAK;UAAAC;UAAAC;QAAA,CADA,CADA;QAIAN,SACA;UAAAI;UAAAC;UAAAC;QAAA,CADA,CAJA;QAOAL,WACA;UAAAG;UAAAC;UAAAC;QAAA,CADA;MAPA,CAfA;MA0BAC;QACAC,OADA;QAEAC,SAFA;QAGAC,YAHA;QAIAC,WAJA;QAKAT;MALA,CA1BA;MAiCA;MACAU;QACAC,OADA;QAEAX;MAFA,CAlCA;MAsCAY,YAtCA;MAsCA;MACAC,YAvCA;MAuCA;MACA;MACAC,aAzCA;MA0CAC;QACAC,oBADA;QAEAC;MAFA,CA1CA;MA8CA;MACAC,aA/CA;MAgDA;MACAC,cAjDA;MAkDA;MACAC;QACAC,cADA;QAEAC,YAFA;QAGAC;MAHA;IAnDA;EAyDA,CA3DA;;EA4DA;EACAC,aACA;EADA,CA7DA;;EAgEA;AACA;AACA;EAEAC,SApEA;;EAsEA;AACA;AACA;EAEAC;IACA;EACA,CA5EA;;EA8EA;AACA;AACA;EAEAC;IACA;IACAC;MACA;MACA;QACAC,OADA;QAEAC,SAFA;QAGAC,QAHA;QAIA3C,OACA;UACA4C,eADA;UAEAC,gBAFA;UAGAC,sBAHA;UAIAC,uBAJA;UAKAvC,SALA;UAMAC,eANA;UAOAC,uBAPA;UAQAC;QARA,CADA,EAWA;UACAiC,aADA;UAEAC,cAFA;UAGAC,sBAHA;UAIAC,uBAJA;UAKAvC,SALA;UAMAC,iBANA;UAOAC,eAPA;UAQAC;QARA,CAXA,EAqBA;UACAiC,aADA;UAEAC,cAFA;UAGAC,sBAHA;UAIAC,uBAJA;UAKAvC,UALA;UAMAC,cANA;UAOAC,gBAPA;UAQAC;QARA,CArBA,EA+BA;UACAiC,aADA;UAEAC,cAFA;UAGAC,sBAHA;UAIAC,uBAJA;UAKAvC,UALA;UAMAC,aANA;UAOAC,WAPA;UAQAC;QARA,CA/BA,EAyCA;UACAiC,aADA;UAEAC,cAFA;UAGAC,sBAHA;UAIAC,uBAJA;UAKAvC,UALA;UAMAC,aANA;UAOAC,WAPA;UAQAC;QARA,CAzCA,EAmDA;UACAiC,aADA;UAEAC,cAFA;UAGAC,sBAHA;UAIAC,uBAJA;UAKAvC,WALA;UAMAC,gBANA;UAOAC,cAPA;UAQAC;QARA,CAnDA;MAJA;MAmEA;MACA,yBAtEA,CAuEA;;MACA;MACA;MACA,gCA1EA,CA2EA;;MAEA;AACA;AACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAtGA;;IAuGA;IACAqC;MACA;MACA;MACA;IACA,CA5GA;;IA6GA;IACAC;MACA;IACA,CAhHA;;IAiHA;IACAC;MACA;;MACA;QACA;QACA;QACA;QACA;QACA;MACA,CANA,MAMA;QACA;QACA;QACA;QACA;QACA;MACA;IACA,CAjIA;;IAkIA;IACAC;MACA;QACA;UACAC,wBACAC,IADA,CACAC;YACA;YACA;;YACA;cACA;cACA;gBACAC,eADA;gBAEAxC;cAFA;YAIA,CANA,MAMA;cACA;gBACAwC,YADA;gBAEAxC;cAFA;YAIA;UACA,CAhBA,EAiBAyC,KAjBA,CAiBAC;YACA;YACA;YACA;UACA,CArBA;QAsBA,CAvBA,MAuBA;UACA;QACA;MACA,CA3BA;IA4BA,CAhKA;;IAiKA;IACAC;MACA;QACAC,uBADA;QAEAC,sBAFA;QAGAL;MAHA,GAKAF,IALA,CAKA;QACAQ,uBACAR,IADA,CACAC;UACA;YACA;cACAC,eADA;cAEAxC;YAFA;YAIA;UACA,CANA,MAMA;YACA;cACAwC,YADA;cAEAxC;YAFA;UAIA;QACA,CAdA,EAeAyC,KAfA,CAeAC;UACA;UACA;QACA,CAlBA;MAmBA,CAzBA,EA0BAD,KA1BA,CA0BA;QACA;UACAD,YADA;UAEAxC;QAFA;MAIA,CA/BA;IAgCA,CAnMA;;IAoMA;IACA+C;MACA;MACA;MACAC,0BACAV,IADA,CACAC;QACA;UACA;YACAC,eADA;YAEAxC;UAFA;UAIA;UACA;QACA,CAPA,MAOA;UACA;YACAwC,YADA;YAEAxC;UAFA;QAIA;MACA,CAfA,EAgBAyC,KAhBA,CAgBAC;QACA;QACA;MACA,CAnBA;IAoBA,CA5NA;;IA6NA;IACAO;MACA;;MACA;QACA;UACAC;QACA;MACA;;MACA;IACA,CAtOA;;IAuOA;IACAC;MACA;MAAA,IACAC,SADA;MAAA,IAEAC,UAFA;;MAGA;QACA;UACA;YACAC,cADA;YAEAC,gBAFA;YAGAC,kBAHA;YAIAC,kBAJA;YAKAC,wBALA;YAMA7C;UANA;UAQA8C;UACAN;QACA;;QACA;UACAM;YACAL,cADA;YAEAC,gBAFA;YAGAC,kBAHA;YAIAC,kBAJA;YAKAC,wBALA;YAMA7C;UANA;QAQA;MACA;;MAEA;QACA;UACA8C;QACA,CAFA,MAEA;UACAP;QACA;MACA;;MACAO;MACAN;MACA;IACA,CA/QA;;IAgRA;IACAO;MACA;QACAnE,uBADA;QAEAoE;MAFA;MAIA;MACA;;MACA;QACA;UACAA;QACA;;QACAC;MACA;;MACAC,oBACAzB,IADA,CACAC;QACA;UACA;YACAC,eADA;YAEAxC;UAFA;UAIA;UACA;QACA,CAPA,MAOA;UACA;YACAwC,YADA;YAEAxC;UAFA;QAIA;MACA,CAfA,EAgBAyC,KAhBA,CAgBAC;QACA;QACA;MACA,CAnBA;IAoBA,CAlTA;;IAmTA;IACAsB;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EA1TA;AAlFA","names":["data","nshow","fshow","loading","editFormVisible","menuAccessshow","title","editForm","roleId","systemNo","roleNo","roleName","token","rules","required","message","trigger","formInline","page","limit","varLable","varName","seletedata","ids","userparm","listData","RoleRight","RoleRightProps","children","label","checkmenu","saveroleId","pageparm","currentPage","pageSize","total","components","watch","created","methods","getdata","code","msg","count","addUser","editUser","addTime","editTime","callFather","search","handleEdit","submitForm","roleSave","then","res","type","catch","err","deleteUser","confirmButtonText","cancelButtonText","roleDelete","menuAccess","RoleRightTree","changemenu","change","changeArr","tree","items","id","pId","name","open","checked","temptree","menuPermSave","moduleIds","parm","RoleRightSave","closeDialog"],"sourceRoot":"src/pages","sources":["Role.vue"],"sourcesContent":["/**\r\n * 系统管理  角色管理\r\n */\r\n<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>角色管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 搜索筛选 -->\r\n    <el-form :inline=\"true\" :model=\"formInline\" class=\"user-search\">\r\n\r\n       <el-form-item label=\"搜索：\">\r\n        <el-input size=\"small\" v-model=\"formInline.roleName\" placeholder=\"输入角色名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"\">\r\n        <el-input size=\"small\" v-model=\"formInline.roleNo\" placeholder=\"输入角色代码\"></el-input>\r\n      </el-form-item> \r\n      <el-form-item>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-search\" @click=\"search\">搜索</el-button>\r\n        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-plus\" @click=\"handleEdit()\">添加</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!--列表-->\r\n    <el-table size=\"small\" :data=\"listData\" highlight-current-row v-loading=\"loading\" border element-loading-text=\"拼命加载中\" style=\"width: 100%;\">\r\n      <el-table-column align=\"center\" type=\"selection\" width=\"60\">\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"roleName\" label=\"角色名称\" width=\"300\">\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"roleNo\" label=\"角色代码\" width=\"300\">\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"editTime\" label=\"修改时间\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <div>{{scope.row.editTime|timestampToTime}}</div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column sortable prop=\"editUser\" label=\"修改人\" width=\"300\">\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" label=\"操作\" min-width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"deleteUser(scope.$index, scope.row)\">删除</el-button>\r\n          <el-button size=\"mini\" type=\"success\" @click=\"menuAccess(scope.$index, scope.row)\">菜单权限</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页组件 -->\r\n    <!-- <Pagination v-bind:child-msg=\"pageparm\" @callFather=\"callFather\"></Pagination> -->\r\n    <!-- 编辑界面 -->\r\n    <el-dialog :title=\"title\" :visible.sync=\"editFormVisible\" width=\"30%\" @click='closeDialog(\"edit\")'>\r\n      <el-form label-width=\"120px\" :model=\"editForm\" ref=\"editForm\" :rules=\"rules\">\r\n         <el-form-item label=\"系统编码\" prop=\"systemNo\">\r\n          <el-input size=\"small\" v-model=\"editForm.systemNo\" auto-complete=\"off\" placeholder=\"请输入系统编码\"></el-input>\r\n        </el-form-item> -->\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input size=\"small\" v-model=\"editForm.roleName\" auto-complete=\"off\" placeholder=\"请输入角色名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色代码\" prop=\"roleNo\">\r\n          <el-input size=\"small\" v-model=\"editForm.roleNo\" auto-complete=\"off\" placeholder=\"请输入角色代码\"></el-input>\r\n        </el-form-item> \r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click='closeDialog(\"edit\")'>取消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" :loading=\"loading\" class=\"title\" @click=\"submitForm('editForm')\">保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 菜单权限 -->\r\n    <el-dialog title=\"菜单权限\" :visible.sync=\"menuAccessshow\" width=\"30%\" @click='closeDialog(\"perm\")'>\r\n      <el-tree ref=\"tree\" default-expand-all=\"\" :data=\"RoleRight\" :props=\"RoleRightProps\" :default-checked-keys=\"checkmenu\" node-key=\"id\" show-checkbox>\r\n      </el-tree>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click='closeDialog(\"perm\")'>取消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" :loading=\"loading\" class=\"title\" @click=\"menuPermSave\">保存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import {\r\n//   roleList,\r\n//   roleSave,\r\n//   roleDelete,\r\n//   rolePwd,\r\n//   RoleRightTree,\r\n//   RoleRightSave\r\n// } from '../../api/userMG'\r\n// import Pagination from '../../components/Pagination'\r\nexport default {\r\n  data() {\r\n    return {\r\n      nshow: true, //switch开启\r\n      fshow: false, //switch关闭\r\n      loading: false, //是显示加载\r\n      editFormVisible: false, //控制编辑页面显示与隐藏\r\n      menuAccessshow: false, //控制数据权限显示与隐藏\r\n      title: '添加',\r\n      editForm: {\r\n        roleId: '',\r\n        systemNo: '',\r\n        roleNo: '',\r\n        roleName: '',\r\n        token: localStorage.getItem('logintoken')\r\n      },\r\n      // rules 表单验证\r\n      rules: {\r\n        systemNo: [\r\n          { required: true, message: '请输入系统编码', trigger: 'blur' }\r\n        ],\r\n        roleNo: [\r\n          { required: true, message: '请输入角色代码', trigger: 'blur' }\r\n        ],\r\n        roleName: [\r\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\r\n        ]\r\n      },\r\n      formInline: {\r\n        page: 1,\r\n        limit: 10,\r\n        varLable: '',\r\n        varName: '',\r\n        token: localStorage.getItem('logintoken')\r\n      },\r\n      // 删除\r\n      seletedata: {\r\n        ids: '',\r\n        token: localStorage.getItem('logintoken')\r\n      },\r\n      userparm: [], //搜索权限\r\n      listData: [], //用户数据\r\n      // 数据权限\r\n      RoleRight: [],\r\n      RoleRightProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      },\r\n      // 选中\r\n      checkmenu: [],\r\n      //参数role\r\n      saveroleId: '',\r\n      // 分页参数\r\n      pageparm: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 10\r\n      }\r\n    }\r\n  },\r\n  // 注册组件\r\n  components: {\r\n    // Pagination\r\n  },\r\n  /**\r\n   * 数据发生改变\r\n   */\r\n\r\n  watch: {},\r\n\r\n  /**\r\n   * 创建完毕\r\n   */\r\n\r\n  created() {\r\n    this.getdata(this.formInline)\r\n  },\r\n\r\n  /**\r\n   * 里面的方法只有被调用才会执行\r\n   */\r\n\r\n  methods: {\r\n    // 获取角色列表\r\n    getdata(parameter) {\r\n      // 模拟数据\r\n      let res = {\r\n        code: 0,\r\n        msg: null,\r\n        count: 6,\r\n        data: [\r\n          {\r\n            addUser: 'root',\r\n            editUser: 'root',\r\n            addTime: 1519182004000,\r\n            editTime: 1520288426000,\r\n            roleId: 1,\r\n            systemNo: 'pmd',\r\n            roleNo: 'Administrator',\r\n            roleName: '超级管理员'\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1521111376000,\r\n            editTime: 1520678191000,\r\n            roleId: 2,\r\n            systemNo: 'order',\r\n            roleNo: 'admin',\r\n            roleName: '公司管理员'\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1520678221000,\r\n            editTime: 1520678221000,\r\n            roleId: 95,\r\n            systemNo: 'pm',\r\n            roleNo: 'common',\r\n            roleName: '普通用户'\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1526349853000,\r\n            editTime: 1526349853000,\r\n            roleId: 96,\r\n            systemNo: '1',\r\n            roleNo: '1',\r\n            roleName: '1'\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1526349942000,\r\n            editTime: 1526437443000,\r\n            roleId: 97,\r\n            systemNo: '2',\r\n            roleNo: '2',\r\n            roleName: '2'\r\n          },\r\n          {\r\n            addUser: null,\r\n            editUser: null,\r\n            addTime: 1526652148000,\r\n            editTime: 1526652148000,\r\n            roleId: 101,\r\n            systemNo: 'test',\r\n            roleNo: 'demo',\r\n            roleName: '演示角色'\r\n          }\r\n        ]\r\n      }\r\n      this.loading = false\r\n      this.listData = res.data\r\n      // 分页赋值\r\n      this.pageparm.currentPage = this.formInline.page\r\n      this.pageparm.pageSize = this.formInline.limit\r\n      this.pageparm.total = res.count\r\n      // 模拟数据结束\r\n\r\n      /***\r\n       * 调用接口，注释上面模拟数据 取消下面注释\r\n       */\r\n      // roleList(parameter)\r\n      //   .then(res => {\r\n      //     this.loading = false\r\n      //     if (res.success == false) {\r\n      //       this.$message({\r\n      //         type: 'info',\r\n      //         message: res.msg\r\n      //       })\r\n      //     } else {\r\n      //       this.listData = res.data\r\n      //       // 分页赋值\r\n      //       this.pageparm.currentPage = this.formInline.page\r\n      //       this.pageparm.pageSize = this.formInline.limit\r\n      //       this.pageparm.total = res.count\r\n      //     }\r\n      //   })\r\n      //   .catch(err => {\r\n      //     this.loading = false\r\n      //     this.$message.error('获取角色列表失败，请稍后再试！')\r\n      //   })\r\n    },\r\n    // 分页插件事件\r\n    callFather(parm) {\r\n      this.formInline.page = parm.currentPage\r\n      this.formInline.limit = parm.pageSize\r\n      this.getdata(this.formInline)\r\n    },\r\n    // 搜索事件\r\n    search() {\r\n      this.getdata(this.formInline)\r\n    },\r\n    //显示编辑界面\r\n    handleEdit: function(index, row) {\r\n      this.editFormVisible = true\r\n      if (row != undefined && row != 'undefined') {\r\n        this.title = '修改'\r\n        this.editForm.roleId = row.roleId\r\n        this.editForm.systemNo = row.systemNo\r\n        this.editForm.roleNo = row.roleNo\r\n        this.editForm.roleName = row.roleName\r\n      } else {\r\n        this.title = '添加'\r\n        this.editForm.roleId = ''\r\n        this.editForm.systemNo = ''\r\n        this.editForm.roleNo = ''\r\n        this.editForm.roleName = ''\r\n      }\r\n    },\r\n    // 编辑、增加页面保存方法\r\n    submitForm(editData) {\r\n      this.$refs[editData].validate(valid => {\r\n        if (valid) {\r\n          roleSave(this.editForm)\r\n            .then(res => {\r\n              this.editFormVisible = false\r\n              this.loading = false\r\n              if (res.success) {\r\n                this.getdata(this.formInline)\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '角色保存成功！'\r\n                })\r\n              } else {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: res.msg\r\n                })\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.editFormVisible = false\r\n              this.loading = false\r\n              this.$message.error('角色保存失败，请稍后再试！')\r\n            })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 删除角色\r\n    deleteUser(index, row) {\r\n      this.$confirm('确定要删除吗?', '信息', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          roleDelete(row.roleId)\r\n            .then(res => {\r\n              if (res.success) {\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '角色已删除！'\r\n                })\r\n                this.getdata(this.formInline)\r\n              } else {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: res.msg\r\n                })\r\n              }\r\n            })\r\n            .catch(err => {\r\n              this.loading = false\r\n              this.$message.error('角色删除失败，请稍后再试！')\r\n            })\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    },\r\n    // 数据权限\r\n    menuAccess: function(index, row) {\r\n      this.menuAccessshow = true\r\n      this.saveroleId = row.roleId\r\n      RoleRightTree(row.roleId)\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '获取权限成功'\r\n            })\r\n            this.changemenu(res.data.data)\r\n            this.RoleRight = this.changeArr(res.data.data)\r\n          } else {\r\n            this.$message({\r\n              type: 'info',\r\n              message: res.data.msg\r\n            })\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false\r\n          this.$message.error('获取权限失败，请稍后再试！')\r\n        })\r\n    },\r\n    // 选中菜单\r\n    changemenu(arr) {\r\n      let change = []\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i].checked) {\r\n          change.push(arr[i].id)\r\n        }\r\n      }\r\n      this.checkmenu = change\r\n    },\r\n    // tree 递归\r\n    changeArr(list) {\r\n      var temptree = [],\r\n        tree = [],\r\n        items = []\r\n      for (var i in list) {\r\n        if (!temptree[list[i].id]) {\r\n          var trow = {\r\n            id: list[i].id,\r\n            pId: list[i].pId,\r\n            name: list[i].name,\r\n            open: list[i].open,\r\n            checked: list[i].checked,\r\n            children: []\r\n          }\r\n          temptree[list[i].id] = trow\r\n          items.push(trow)\r\n        }\r\n        if (list[i].uid > 0) {\r\n          temptree[list[i].id]['children'].push({\r\n            id: list[i].id,\r\n            pId: list[i].pId,\r\n            name: list[i].name,\r\n            open: list[i].open,\r\n            checked: list[i].checked,\r\n            children: []\r\n          })\r\n        }\r\n      }\r\n\r\n      for (var j in items) {\r\n        if (temptree[items[j].pId]) {\r\n          temptree[items[j].pId]['children'].push(temptree[items[j].id])\r\n        } else {\r\n          tree.push(temptree[items[j].id])\r\n        }\r\n      }\r\n      temptree = null\r\n      items = null\r\n      return tree\r\n    },\r\n    // 菜单权限-保存\r\n    menuPermSave() {\r\n      let parm = {\r\n        roleId: this.saveroleId,\r\n        moduleIds: ''\r\n      }\r\n      let node = this.$refs.tree.getCheckedNodes()\r\n      let moduleIds = []\r\n      if (node.length != 0) {\r\n        for (let i = 0; i < node.length; i++) {\r\n          moduleIds.push(node[i].id)\r\n        }\r\n        parm.moduleIds = JSON.stringify(moduleIds)\r\n      }\r\n      RoleRightSave(parm)\r\n        .then(res => {\r\n          if (res.success) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '权限保存成功'\r\n            })\r\n            this.menuAccessshow = false\r\n            this.getdata(this.formInline)\r\n          } else {\r\n            this.$message({\r\n              type: 'info',\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false\r\n          this.$message.error('权限保存失败，请稍后再试！')\r\n        })\r\n    },\r\n    // 关闭编辑、增加弹出框\r\n    closeDialog(dialog) {\r\n      if (dialog == 'edit') {\r\n        this.editFormVisible = false\r\n      } else if (dialog == 'perm') {\r\n        this.menuAccessshow = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-search {\r\n  margin-top: 20px;\r\n}\r\n.userRole {\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n "]}]}