{"remainingRequest":"D:\\VSCodeProjects\\smart-community-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\VSCodeProjects\\smart-community-vue\\src\\pages\\ParkingRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\VSCodeProjects\\smart-community-vue\\src\\pages\\ParkingRecord.vue","mtime":1657764046415},{"path":"D:\\VSCodeProjects\\smart-community-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657698398539},{"path":"D:\\VSCodeProjects\\smart-community-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1657698397297},{"path":"D:\\VSCodeProjects\\smart-community-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657698398539},{"path":"D:\\VSCodeProjects\\smart-community-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1657698409451}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8v5Yid5aeL5pi+56S6DQogICAgICBwYWdlOiB7DQogICAgICAgIHBhZ2VOdW06IDEsDQogICAgICAgIHBhZ2VTaXplOiA1LA0KICAgICAgfSwNCiAgICAgIC8v5p+l6K+i5p2h5Lu2DQogICAgICBxdWVyeVBhcmtpbmdSZWNvcmQ6IHsNCiAgICAgICAgcmVjb3JkTnVtYmVyOiBudWxsLA0KICAgICAgICBjYXJJbmZvOiB7fSwNCiAgICAgICAgb3duZXJzSW5mbzoge30NCiAgICAgIH0sDQogICAgICAvL+afpeivouahhg0KICAgICAgb3B0aW9uc1F1ZXJ5OiBbew0KICAgICAgICB2YWx1ZTogbnVsbCwNCiAgICAgICAgbGFiZWw6IG51bGwNCiAgICAgIH1dLA0KICAgICAgLy/mt7vliqDorrDlvZXovabniYzpgInmi6nmoYYNCiAgICAgIG9wdGlvbnNBZGQ6IFt7DQogICAgICAgIHZhbHVlOiBudWxsLA0KICAgICAgICBsYWJlbDogbnVsbA0KICAgICAgfV0sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZUFkZDogZmFsc2UsDQogICAgICBlZGl0UGFya2luZ1JlY29yZDogew0KICAgICAgICBpZDogMCwNCiAgICAgICAgY2FySW5mbzogew0KICAgICAgICAgIGlkOiAwLA0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0UmFya2luZ1JlY29yZHNUb1BhZ2UoKTsNCiAgICAvL3RoaXMuZ2V0Q2Fyc0luQ2FySW5mbygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0UmFya2luZ1JlY29yZHNUb1BhZ2UoKSB7DQogICAgICB0aGlzLiRheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgwODAvZ2V0UGFya2luZ1JlY29yZHNUb1BhZ2UvIiArIHRoaXMucGFnZS5wYWdlTnVtICsgIi8iICsgdGhpcy5wYWdlLnBhZ2VTaXplLCB0aGlzLnF1ZXJ5UGFya2luZ1JlY29yZCkudGhlbihyZXNwID0+IHsNCiAgICAgICAgaWYgKHJlc3AuZGF0YS5jb2RlID09IDIwMCkgew0KICAgICAgICAgIHRoaXMucGFnZSA9IHJlc3AuZGF0YS5kYXRhOw0KICAgICAgICAgIHRoaXMuZ2V0Q2Fyc0luUGFya2luZ1JlY29yZCgpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldENhcnNJblBhcmtpbmdSZWNvcmQoKSB7DQogICAgICB0aGlzLiRheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgwODAvZ2V0Q2Fyc0luUGFya2luZ1JlY29yZCIpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnNRdWVyeSA9IHJlc3AuZGF0YS5kYXRhOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldENhcnNJbkNhckluZm8oKSB7DQogICAgICB0aGlzLiRheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgwODAvZ2V0Q2Fyc0luQ2FySW5mbyIpLnRoZW4ocmVzcCA9PiB7DQogICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLm9wdGlvbnNBZGQgPSByZXNwLmRhdGEuZGF0YTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlLnBhZ2VTaXplID0gdmFsOw0KICAgICAgdGhpcy5nZXRSYXJraW5nUmVjb3Jkc1RvUGFnZSgpOw0KICAgIH0sDQogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZS5wYWdlTnVtID0gdmFsOw0KICAgICAgdGhpcy5nZXRSYXJraW5nUmVjb3Jkc1RvUGFnZSgpOw0KICAgIH0sDQogICAgcXVlcnlQYXJraW5nUmVjb3JkcygpIHsNCiAgICAgIHRoaXMuZ2V0UmFya2luZ1JlY29yZHNUb1BhZ2UoKTsNCiAgICB9LA0KICAgIC8v5re75Yqg6L2m6L6G6L+b5YWl6K6w5b2V5byA5aeLDQogICAgYWRkQ2FySW5QYXJraW5nUmVjb3JkKCkgew0KICAgICAgdGhpcy5nZXRDYXJzSW5DYXJJbmZvKCk7DQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlQWRkID0gdHJ1ZTsNCiAgICB9LA0KICAgIGFkZENhckluUmVjb3JkQ2FuY2VsKCkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZUFkZCA9IGZhbHNlOw0KICAgICAgdGhpcy5jbGVhckVkaXRQYXJraW5nUmVjb3JkKCk7DQogICAgICB0aGlzLm9wdGlvbnNBZGQgPSBbXTsNCiAgICB9LA0KICAgIGFkZENhckluUmVjb3JkT2soKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTmt7vliqAsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjgwODAvYWRkQ2FySW5SZWNvcmQvIiArIHRoaXMuZWRpdFBhcmtpbmdSZWNvcmQuY2FySW5mby5pZCkudGhlbihyZXNwID0+IHsNCiAgICAgICAgICBpZiAocmVzcC5kYXRhLmNvZGUgPT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfIScNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5nZXRSYXJraW5nUmVjb3Jkc1RvUGFnZSgpOw0KICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZUFkZCA9IGZhbHNlOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLA0KICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwLmRhdGEubXNnDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgbWVzc2FnZTogJ+WPlua2iOa3u+WKoCcNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v6L2m6L6G5Ye65Y675byA5aeLDQogICAgaGFuZGxlRWRpdE91dChyb3cpew0KICAgICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTorqnovabovoYnK3Jvdy5jYXJJbmZvLmNhck51bWJlcisn5Ye65Y67LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2NoYW5nZUNhck91dFJlY29yZC8iICsgcm93LmlkKS50aGVuKHJlc3AgPT4gew0KICAgICAgICAgIGlmIChyZXNwLmRhdGEuY29kZSA9PSAyMDApIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfovabovoblh7rljrvmiJDlip8hJw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmdldFJhcmtpbmdSZWNvcmRzVG9QYWdlKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsDQogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3AuZGF0YS5tc2cNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI6L2m6L6G5Ye65Y67Jw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/muIXnqbrmlbDmja4NCiAgICBjbGVhckVkaXRQYXJraW5nUmVjb3JkKCkgew0KICAgICAgdGhpcy5lZGl0UGFya2luZ1JlY29yZCA9IHsNCiAgICAgICAgaWQ6IDAsDQogICAgICAgIGNhckluZm86IHsNCiAgICAgICAgICBpZDogMCwNCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ParkingRecord.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ParkingRecord.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 查询添加 -->\r\n    <el-form :inline=\"true\" :model=\"queryParkingRecord\" class=\"demo-form-inline\">\r\n      <el-form-item label=\"车牌号\">\r\n        <el-select filterable v-model=\"queryParkingRecord.carInfo.id\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in optionsQuery\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" :disabled=\"item.disabled\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"queryParkingRecords\">查询</el-button>\r\n        <el-button type=\"primary\" @click=\"addCarInParkingRecord\">添加车辆进入记录</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 车辆信息展示表格 -->\r\n    <div>\r\n      <el-table :data=\"page.list\" style=\"width: 100%\">\r\n        <el-table-column prop=\"recordNumber\" label=\"记录编号\" width=\"100\"> </el-table-column>\r\n        <el-table-column prop=\"carInfo.carNumber\" label=\"车牌号\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"ownersInfo.name\" label=\"车主名\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"ownersInfo.telephone\" label=\"车主电话\" width=\"150\"></el-table-column>\r\n        <el-table-column prop=\"inTime\" label=\"进入时间\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"outTime\" label=\"离开时间\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"cost\" label=\"费用\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"payType\" label=\"支付方式\" width=\"150\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"handleEditOut(scope.row)\">车辆出去</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <!-- 分页 -->\r\n    <div>\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page.sync=\"page.pageNum\" :page-sizes=\"[2, 5, 10]\" :page-size=\"page.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"page.total\">>\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <!-- 车辆进入--添加记录 -->\r\n    <div>\r\n      <el-dialog title=\"车辆进入\" :visible.sync=\"dialogFormVisibleAdd\">\r\n        <el-form :model=\"editParkingRecord\" label-width=\"80px\">\r\n          <el-form-item label=\"车牌号\">\r\n            <el-select filterable v-model=\"editParkingRecord.carInfo.id\" placeholder=\"请选择\">\r\n              <el-option v-for=\"item in optionsAdd\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" :disabled=\"item.disabled\">\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"addCarInRecordCancel\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"addCarInRecordOk\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      //初始显示\r\n      page: {\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n      },\r\n      //查询条件\r\n      queryParkingRecord: {\r\n        recordNumber: null,\r\n        carInfo: {},\r\n        ownersInfo: {}\r\n      },\r\n      //查询框\r\n      optionsQuery: [{\r\n        value: null,\r\n        label: null\r\n      }],\r\n      //添加记录车牌选择框\r\n      optionsAdd: [{\r\n        value: null,\r\n        label: null\r\n      }],\r\n      dialogFormVisibleAdd: false,\r\n      editParkingRecord: {\r\n        id: 0,\r\n        carInfo: {\r\n          id: 0,\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getRarkingRecordsToPage();\r\n    //this.getCarsInCarInfo();\r\n  },\r\n  methods: {\r\n    getRarkingRecordsToPage() {\r\n      this.$axios.post(\"http://localhost:8080/getParkingRecordsToPage/\" + this.page.pageNum + \"/\" + this.page.pageSize, this.queryParkingRecord).then(resp => {\r\n        if (resp.data.code == 200) {\r\n          this.page = resp.data.data;\r\n          this.getCarsInParkingRecord();\r\n        }\r\n      });\r\n    },\r\n    getCarsInParkingRecord() {\r\n      this.$axios.post(\"http://localhost:8080/getCarsInParkingRecord\").then(resp => {\r\n        if (resp.data.code == 200) {\r\n          this.optionsQuery = resp.data.data;\r\n        }\r\n      });\r\n    },\r\n    getCarsInCarInfo() {\r\n      this.$axios.post(\"http://localhost:8080/getCarsInCarInfo\").then(resp => {\r\n        if (resp.data.code == 200) {\r\n          this.optionsAdd = resp.data.data;\r\n        }\r\n      });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.page.pageSize = val;\r\n      this.getRarkingRecordsToPage();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.page.pageNum = val;\r\n      this.getRarkingRecordsToPage();\r\n    },\r\n    queryParkingRecords() {\r\n      this.getRarkingRecordsToPage();\r\n    },\r\n    //添加车辆进入记录开始\r\n    addCarInParkingRecord() {\r\n      this.getCarsInCarInfo();\r\n      this.dialogFormVisibleAdd = true;\r\n    },\r\n    addCarInRecordCancel() {\r\n      this.dialogFormVisibleAdd = false;\r\n      this.clearEditParkingRecord();\r\n      this.optionsAdd = [];\r\n    },\r\n    addCarInRecordOk() {\r\n      this.$confirm('确认添加, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$axios.post(\"http://localhost:8080/addCarInRecord/\" + this.editParkingRecord.carInfo.id).then(resp => {\r\n          if (resp.data.code == 200) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '添加成功!'\r\n            });\r\n            this.getRarkingRecordsToPage();\r\n            this.dialogFormVisibleAdd = false;\r\n          } else {\r\n            this.$message({\r\n              type: 'warning',\r\n              message: resp.data.msg\r\n            });\r\n          }\r\n        });\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消添加'\r\n        });\r\n      });\r\n    },\r\n    //车辆出去开始\r\n    handleEditOut(row){\r\n        this.$confirm('确认让车辆'+row.carInfo.carNumber+'出去, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$axios.post(\"http://localhost:8080/changeCarOutRecord/\" + row.id).then(resp => {\r\n          if (resp.data.code == 200) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '车辆出去成功!'\r\n            });\r\n            this.getRarkingRecordsToPage();\r\n          } else {\r\n            this.$message({\r\n              type: 'warning',\r\n              message: resp.data.msg\r\n            });\r\n          }\r\n        });\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消车辆出去'\r\n        });\r\n      });\r\n    },\r\n    //清空数据\r\n    clearEditParkingRecord() {\r\n      this.editParkingRecord = {\r\n        id: 0,\r\n        carInfo: {\r\n          id: 0,\r\n        }\r\n      };\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}